{% extends "base.html" %}
{% set cache_bust = cache_bust|default(1) %}

{% block extra_head %}
<style>
  .chart-wrap { height: 420px; }
</style>
{% endblock %}

{% block content %}
<div class="d-flex flex-wrap align-items-center justify-content-between gap-3 mb-3">
  <h2 class="m-0" id="symbolTitle">TSM</h2>

  <!-- Time ranges -->
  <div class="btn-group flex-wrap" role="group" aria-label="Ranges">
    <button class="btn btn-outline-secondary btn-sm range-btn" data-range="1d"  data-interval="5m">1D</button>
    <button class="btn btn-outline-secondary btn-sm range-btn" data-range="5d"  data-interval="15m">5D</button>
    <button class="btn btn-outline-secondary btn-sm range-btn" data-range="1mo" data-interval="1d">1M</button>
    <button class="btn btn-outline-secondary btn-sm range-btn" data-range="6mo" data-interval="1d">6M</button>
    <button class="btn btn-outline-secondary btn-sm range-btn active" data-range="ytd" data-interval="1d">YTD</button>
    <button class="btn btn-outline-secondary btn-sm range-btn" data-range="1y"  data-interval="1d">1Y</button>
    <button class="btn btn-outline-secondary btn-sm range-btn" data-range="5y"  data-interval="1wk">5Y</button>
    <button class="btn btn-outline-secondary btn-sm range-btn" data-range="max" data-interval="1mo">All</button>
  </div>
</div>

<!-- Ticker pills -->
<ul class="nav nav-pills mb-3" id="tickerPills">
  <!-- Add/remove symbols here; TSM starts active -->
  <li class="nav-item"><button class="nav-link active symbol-btn" data-symbol="TSM">TSM</button></li>
  <li class="nav-item"><button class="nav-link symbol-btn" data-symbol="NVDA">NVDA</button></li>
  <li class="nav-item"><button class="nav-link symbol-btn" data-symbol="MSFT">MSFT</button></li>
  <li class="nav-item"><button class="nav-link symbol-btn" data-symbol="GOOGL">GOOGL</button></li>
  <li class="nav-item"><button class="nav-link symbol-btn" data-symbol="AMZN">AMZN</button></li>
</ul>

<div class="card shadow-sm">
  <div class="card-body chart-wrap">
    <canvas id="tsmChart"></canvas>
  </div>
</div>
{% endblock %}

{% block page_scripts %}
  <!-- Chart libs only on this page -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3"></script>
  <script src="{{ url_for('static', filename='js/markets.js') }}?v={{ cache_bust }}"></script>
{% endblock %}
